

```
SQL_FUNCTION_MAP.put("adddate", "");  // ADDDATE(d,n)	计算起始日期 d 加上 n 天的日期	
		SQL_FUNCTION_MAP.put("addtime", "");  // ADDTIME(t,n)	n 是一个时间表达式，时间 t 加上时间表达式 n	
		SQL_FUNCTION_MAP.put("curdate", "");  // CURDATE()	返回当前日期	
		SQL_FUNCTION_MAP.put("current_date", "");  // CURRENT_DATE()	返回当前日期	
		SQL_FUNCTION_MAP.put("current_time", "");  // CURRENT_TIME	返回当前时间	
		SQL_FUNCTION_MAP.put("current_timestamp", "");  // CURRENT_TIMESTAMP()	返回当前日期和时间	
		SQL_FUNCTION_MAP.put("curtime", "");  // CURTIME()	返回当前时间	
		SQL_FUNCTION_MAP.put("date", "");  // DATE()	从日期或日期时间表达式中提取日期值	
		SQL_FUNCTION_MAP.put("datediff", "");  // DATEDIFF(d1,d2)	计算日期 d1->d2 之间相隔的天数	
		SQL_FUNCTION_MAP.put("date_add", "");  // DATE_ADD(d，INTERVAL expr type)	计算起始日期 d 加上一个时间段后的日期	
		SQL_FUNCTION_MAP.put("date_format", "");  // DATE_FORMAT(d,f)	按表达式 f的要求显示日期 d	
		SQL_FUNCTION_MAP.put("date_sub", "");  // DATE_SUB(date,INTERVAL expr type)	函数从日期减去指定的时间间隔。	
		SQL_FUNCTION_MAP.put("day", "");  // DAY(d)	返回日期值 d 的日期部分	
		SQL_FUNCTION_MAP.put("dayname", "");  // DAYNAME(d)	返回日期 d 是星期几，如 Monday,Tuesday	
		SQL_FUNCTION_MAP.put("dayofmonth", "");  // DAYOFMONTH(d)	计算日期 d 是本月的第几天	
		SQL_FUNCTION_MAP.put("dayofweek", "");  // DAYOFWEEK(d)	日期 d 今天是星期几，1 星期日，2 星期一，以此类推	
		SQL_FUNCTION_MAP.put("dayofyear", "");  // DAYOFYEAR(d)	计算日期 d 是本年的第几天	
		SQL_FUNCTION_MAP.put("extract", "");  // EXTRACT(type FROM d)	从日期 d 中获取指定的值，type 指定返回的值。 
		SQL_FUNCTION_MAP.put("from_days", "");  // FROM_DAYS(n)	计算从 0000 年 1 月 1 日开始 n 天后的日期	
		SQL_FUNCTION_MAP.put("hour", "");  // 'HOUR(t)	返回 t 中的小时值	
		SQL_FUNCTION_MAP.put("last_day", "");  // LAST_DAY(d)	返回给给定日期的那一月份的最后一天	
		SQL_FUNCTION_MAP.put("localtime", "");  // LOCALTIME()	返回当前日期和时间	
		SQL_FUNCTION_MAP.put("localtimestamp", "");  // LOCALTIMESTAMP()	返回当前日期和时间	
		SQL_FUNCTION_MAP.put("makedate", "");  // MAKEDATE(year, day-of-year)	基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期	
		SQL_FUNCTION_MAP.put("maketime", "");  // MAKETIME(hour, minute, second)	组合时间，参数分别为小时、分钟、秒	
		SQL_FUNCTION_MAP.put("microsecond", "");  // MICROSECOND(date)	返回日期参数所对应的微秒数	
		SQL_FUNCTION_MAP.put("minute", "");  // MINUTE(t)	返回 t 中的分钟值	
		SQL_FUNCTION_MAP.put("monthname", "");  // MONTHNAME(d)	返回日期当中的月份名称，如 November	
		SQL_FUNCTION_MAP.put("month", "");  // MONTH(d)	返回日期d中的月份值，1 到 12	
		SQL_FUNCTION_MAP.put("now", "");  // NOW()	返回当前日期和时间	
		SQL_FUNCTION_MAP.put("period_add", "");  // PERIOD_ADD(period, number)	为 年-月 组合日期添加一个时段	
		SQL_FUNCTION_MAP.put("period_diff", "");  // PERIOD_DIFF(period1, period2)	返回两个时段之间的月份差值	
		SQL_FUNCTION_MAP.put("quarter", "");  // QUARTER(d)	返回日期d是第几季节，返回 1 到 4	
		SQL_FUNCTION_MAP.put("second", "");  // SECOND(t)	返回 t 中的秒钟值	
		SQL_FUNCTION_MAP.put("sec_to_time", "");  // SEC_TO_TIME", "");  // )	将以秒为单位的时间 s 转换为时分秒的格式	
		SQL_FUNCTION_MAP.put("str_to_date", "");  // STR_TO_DATE", "");  // tring, format_mask)	将字符串转变为日期	
		SQL_FUNCTION_MAP.put("subdate", "");  // SUBDATE(d,n)	日期 d 减去 n 天后的日期	
		SQL_FUNCTION_MAP.put("subtime", "");  // SUBTIME(t,n)	时间 t 减去 n 秒的时间	
		SQL_FUNCTION_MAP.put("sysdate", "");  // SYSDATE()	返回当前日期和时间	
		SQL_FUNCTION_MAP.put("time", "");  // TIME(expression)	提取传入表达式的时间部分	
		SQL_FUNCTION_MAP.put("time_format", "");  // TIME_FORMAT(t,f)	按表达式 f 的要求显示时间 t	
		SQL_FUNCTION_MAP.put("time_to_sec", "");  // TIME_TO_SEC(t)	将时间 t 转换为秒	
		SQL_FUNCTION_MAP.put("timediff", "");  // TIMEDIFF(time1, time2)	计算时间差值	
		SQL_FUNCTION_MAP.put("timestamp", "");  // TIMESTAMP(expression, interval)	单个参数时，函数返回日期或日期时间表达式；有2个参数时，将参数加和	
		SQL_FUNCTION_MAP.put("to_days", "");  // TO_DAYS(d)	计算日期 d 距离 0000 年 1 月 1 日的天数	
		SQL_FUNCTION_MAP.put("week", "");  // WEEK(d)	计算日期 d 是本年的第几个星期，范围是 0 到 53	
		SQL_FUNCTION_MAP.put("weekday", "");  // WEEKDAY(d)	日期 d 是星期几，0 表示星期一，1 表示星期二	
		SQL_FUNCTION_MAP.put("weekofyear", "");  // WEEKOFYEAR(d)	计算日期 d 是本年的第几个星期，范围是 0 到 53	
		SQL_FUNCTION_MAP.put("year", "");  // YEAR(d)	返回年份	
		SQL_FUNCTION_MAP.put("yearweek", "");  // YEARWEEK(date, mode)	返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推	
		SQL_FUNCTION_MAP.put("unix_timestamp", "");  // UNIX_TIMESTAMP(date)	获取UNIX时间戳函数，返回一个以 UNIX 时间戳为基础的无符号整数
		SQL_FUNCTION_MAP.put("from_unixtime", "");  // FROM_UNIXTIME(date)	将 UNIX 时间戳转换为时间格式，与UNIX_TIMESTAMP互为反函数

```



clickhosue 对日期时间处理函数的支持，相对于mysql

⭕

| mysql函数         | clickhouse 测试 | 修改方案                                                     | 修改后测试 |
| :---------------- | --------------- | :----------------------------------------------------------- | ---------- |
| adddate           | ❌               | addDays,addYears, addMonths, addWeeks, addDays, <br>addHours, addMinutes, addSeconds,addQuarters | ✔️          |
| adtime            | ❌               |                                                              |            |
| curdate           | ❌               | today                                                        | now        |
| current_date      | ❌               | today                                                        |            |
| current_time      | ❌               |                                                              |            |
| current_timestamp | ❌               |                                                              |            |
| curtime           | ❌               |                                                              |            |
| date              | ✔️               |                                                              |            |
| datediff          | ❌               | dateDiff                                                     |            |
| date_add          | ❌               |                                                              |            |
| date_format       | ❌               | formatDateTime                                               |            |
| date_sub          | ❌               | subtractYears,subtractMonths,subtractWeeks,subtractDays,<br>subtractours,subtractMinutes,subtractSeconds,subtractQuarters |            |
| day               | ✔️               |                                                              |            |
| dayname           | ❌               |                                                              |            |
| dayofmonth        | ❌               | toDayOfMonth                                                 |            |
| dayofweek         | ❌               | toDayOfWeek                                                  |            |
| dayofyear         | ❌               | toDayOfYear                                                  |            |
| extract           | ✔️               | 支持，内部会转换为clickhouse对应的toXX                       |            |
| from_days         | ❌               |                                                              |            |
| hour              | ✔️               |                                                              |            |
| last_day          | ❌               |                                                              |            |
| localtime         | ❌               |                                                              |            |
| localtimestamp    | ❌               |                                                              |            |
| makedate          | ❌               |                                                              |            |
| maketime          | ❌               |                                                              |            |
| microsecond       | ❌               |                                                              |            |
| minute            | ✔️               |                                                              |            |
| monthname         | ❌               |                                                              |            |
| month             | ✔️               |                                                              |            |
| now               | ✔️               |                                                              |            |
| period_add        | ❌               |                                                              |            |
| period_diff       | ❌               |                                                              |            |
| quarter           | ✔️               |                                                              |            |
| second            | ✔️               |                                                              |            |
| sec_to_time       | ❌               |                                                              |            |
| str_to_date       | ❌               |                                                              |            |
| subdate           | ❌               |                                                              |            |
| subtime           | ❌               |                                                              |            |
| sysdate           | ❌               |                                                              |            |
| time              | ❌               |                                                              |            |
| time_format       | ❌               | formatDateTime                                               | ✔️          |
| time_to_sec       | ❌               |                                                              |            |
| timediff          | ❌               | dateDiff                                                     | ✔️          |
| timestamp         | ❌               |                                                              |            |
| to_days           | ❌               |                                                              |            |
| week              | ✔️               |                                                              |            |
| weekday           | ❌               | toDayOfWeek                                                  | ✔️          |
| weekofyear        | ❌               |                                                              |            |
| year              | ✔️               |                                                              |            |
| yearweek          | ❌               |                                                              |            |
| unix_timestamp    | ❌               |                                                              |            |
| from_unixtime     | ❌               |                                                              |            |



